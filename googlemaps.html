<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Google Maps</title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <style>
          html, body {
            height: 100%;
            margin: 0;
            padding: 0;
          }
          #map {
            height: 50%;
            width: 40%;
            display: block;
            margin: 0 auto;
            margin-top: 15%;
          }
        </style>
    </head>
    <body>
        <div id="map"></div>

    <script>

    var currentLocation;
    var marker;

    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 4,
        center: {lat: 51.5072, lng: 0.1275 }
      });

      map.addListener('click', function(e) {
        placeMarkerAndPanTo(e.latLng, map);
        currentLocation = {
            lat: '' + e.latLng.lat(),
            lng: '' + e.latLng.lng()
        }
      });
    }

    function placeMarkerAndPanTo(latLng, map) {
        if(marker) marker.setMap(null);
        marker = new google.maps.Marker({
            position: latLng,
            map: map
      });
      map.panTo(latLng);

    }

    function weather() {
        var xhr = new XMLHttpRequest(),
            url = "http://api.openweathermap.org/data/2.5/weather?lat=" + currentLocation.lat + '&lon=' +currentLocation.lng + "&appid=" +  secretKeys.weather;
        xhr.open("GET",url,false);
        xhr.send();
        return JSON.parse(xhr.responseText);
    }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key="+secretKeys.google+"&signed_in=true&callback=initMap" async defer>
    </script>
    </body>
</html>
